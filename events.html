---
layout: default
title: Events
---

<h2>Upcoming Events</h2>
<table id="upcoming-events">
  <thead>
    <tr>
      <th>Date</th>
      <th>Event</th>
      <th>Location</th>
      <th>Show Time (not doors!)</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h2>Past Events</h2>
<table id="past-events">
  <thead>
    <tr>
      <th>Date</th>
      <th>Event</th>
      <th>Location</th>
      <th>Show Time (not doors!)</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<template id="event-row-template">
  <tr class="event-row">
    {% include event-row.html %}
  </tr>
</template>

<script>
  window.EVENTS = [
    {% assign sorted_events = site.events | sort: "date" %}
    {% for event in sorted_events %}
      {
        date: "{{ event.date | date: '%Y-%m-%d' }}",
        html: `{% include event-row.html event=event %}`
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];
</script>

<script>
  (function () {
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  const yesterday = new Date(today - 8.64e7); // use yesterday to avoid time zone issues

  const upcomingBody = document.querySelector("#upcoming-events tbody");
  const pastBody = document.querySelector("#past-events tbody");

  const upcoming = [];
  const past = [];

  window.EVENTS.forEach((event) => {
    const eventDate = new Date(event.date + "T00:00:00");

    if (eventDate >= yesterday) {
      upcoming.push(event);
    } else {
      past.push(event);
    }
  });

  upcoming.forEach((event) => {
    const row = document.createElement("tr");
    row.innerHTML = event.html;
    upcomingBody.appendChild(row);
  });

  past.reverse().forEach((event) => {
    const row = document.createElement("tr");
    row.innerHTML = event.html;
    pastBody.appendChild(row);
  });

  if (!upcomingBody.children.length) {
    upcomingBody.innerHTML = `<tr><td colspan="4">No upcoming events at this time.</td></tr>`;
  }

  if (!pastBody.children.length) {
    pastBody.innerHTML = `<tr><td colspan="4">No past events found.</td></tr>`;
  }
  })();
</script>